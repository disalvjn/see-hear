<style>
</style>
<canvas id="canvas"></canvas>
<script>

 function interpret(ctx, event) {
     event.pixels.forEach(item => {
         ctx.fillStyle = item["pixel/color"];
         ctx.fillRect(item["pixel/x"], item["pixel/y"], 1, 1);
     });
 }

 let canvas = document.getElementById('canvas');
 let ctx = canvas.getContext('2d');

 let ws = new WebSocket("ws://localhost:8080");
 ws.onmessage = function(event) {
    let data = JSON.parse(event.data);
    
    canvas.width = data.width;
    canvas.height = data.height;

     // {height: , width:, pixels: [{x:, y:, color: }]}
     // color in hex
     ctx.clearRect(0, 0, data.width, data.height);
     // after clearing the rectangle, this gets cleared also.
     ctx.globalCompositeOperation = 'lighter';
     interpret(ctx, data);
 }

</script>
